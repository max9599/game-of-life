{"version":3,"sources":["components/BoardRenderer.tsx","components/NumericSlider.tsx","components/GameConfigurator.tsx","game/Config.ts","game/index.ts","game/Game.ts","App.tsx","serviceWorker.js","index.tsx"],"names":["BoardStyled","styled","div","props","paused","React","memo","game","grid","config","toggleCellState","unit","size","cellRGBA","canvasElement","useRef","sizeInPixel","onCellToggle","useCallback","event","current","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","useEffect","context","getContext","imageData","createImageData","data","i","gridLen","pixelIndex","len","pData","putImageData","data-testid","ref","onClick","width","height","NumericSlider","label","ConfigStyled","rgba","useState","setConfig","onRestart","restart","onStart","start","onReset","stop","reset","onStop","onChangeSize","value","setSize","onChangeUnit","setUnit","onChangeInterval","setIntervalMs","onChangeIterations","setIterations","onChangeRGBA","color","setCellRGBA","r","g","b","a","rgbaColorToRGBA","rgb","iteration","maxValue","minValue","step","onChangeComplete","onChange","intervalMs","iterations","className","Config","initialAliveCells","initialAliveCellsIndexes","fillInitialAliveCellsMap","reduce","prev","curr","concat","find","num","inRGBARange","console","warn","addInitialAliveCell","isXYInRange","Error","push","Game","interval","update","initGame","initXYCell","setInterval","tick","doUpdate","onUpdate","doAction","clearInterval","length","total","getTotalAliveNeighbours","getGameState","pos","alive","indexOf","this","defaultConfig","App","gameInstance","useMemo","setGame","useGame","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.6b6444db.chunk.js","sourcesContent":["import React, { useRef, useEffect, useCallback } from 'react'\nimport styled from 'styled-components'\nimport { GameState } from '../game/Game'\n\nexport type BoardRendererProps = {\n    game: GameState\n}\n\nexport type BoardRendererStyledProps = { paused: boolean }\n\nconst BoardStyled = styled.div<BoardRendererStyledProps>`\n    position: absolute;\n    overflow: auto;\n    max-height: 100vh;\n    right: 0;\n    top: 0;\n    height: 100vh;\n    width: calc(100vw - 250px);\n    background: rgba(0,0,0,0.01);\n    \n    canvas {\n        border: 1px solid rgba(0,0,0,.05);\n        background: rgba(0,0,0,0.0ยง);\n        cursor: ${props => props.paused ? 'pointer' : 'default'};\n    }\n`\n\nconst BoardRenderer: React.FC<BoardRendererProps> = ({ game }) => {\n    const { grid, config, paused, toggleCellState } = game\n    const { unit, size, cellRGBA } = config\n    const canvasElement = useRef<HTMLCanvasElement>(null)\n    const sizeInPixel = size * unit\n    const onCellToggle = useCallback((event) => {\n        if (paused && canvasElement.current) {\n            const rect = canvasElement.current.getBoundingClientRect()\n            const x = event.clientX - rect.left\n            const y = event.clientY - rect.top\n            toggleCellState(~~(x/unit) + ~~(y/unit)*size)\n        }\n    }, [size, unit, paused, toggleCellState])\n    useEffect(() => {\n        if (canvasElement.current) {\n            const canvas = canvasElement.current\n            const context = canvas.getContext('2d')\n            if (context) {\n                const imageData = context.createImageData(sizeInPixel, sizeInPixel)\n                const { data } = imageData\n                for (let i = 0, gridLen = size * size; i < gridLen; i++) {\n                    if (grid[i]) {\n                        const x = ~~(i % size) * unit\n                        const y = ~~(i / size) * unit\n                        for (let pixelIndex = 0, len = unit * unit; pixelIndex < len; pixelIndex++) {\n                            const xx = ~~(pixelIndex % unit)\n                            const yy = ~~(pixelIndex / unit)\n                            const pData = ((x + xx) + (y + yy) * sizeInPixel) * 4\n                            data[pData] = cellRGBA[0]\n                            data[pData + 1] = cellRGBA[1]\n                            data[pData + 2] = cellRGBA[2]\n                            data[pData + 3] = cellRGBA[3]\n                        }\n                    }\n                }\n                context.putImageData(imageData, 0, 0)\n            }\n        }\n    })\n\n    return <BoardStyled data-testid=\"board-renderer\" paused={paused}>\n        <canvas ref={canvasElement}\n                onClick={onCellToggle}\n                width={sizeInPixel}\n                height={sizeInPixel}/>\n    </BoardStyled>\n}\n\nexport default React.memo(BoardRenderer)\n","import React from 'react'\nimport InputRange, { InputRangeProps } from 'react-input-range'\n\ntype NumericSliderProps = InputRangeProps & {\n    label: string\n}\n\nconst NumericSlider: React.FC<NumericSliderProps> = ({ label, ...props }) => (\n    <div>\n        <label>{label}</label>\n        <InputRange\n            {...props}/>\n    </div>\n)\n\nexport default NumericSlider\n","import React, { useCallback, useState } from 'react'\nimport styled from 'styled-components'\nimport { SliderPicker, RGBColor } from 'react-color'\nimport { Range } from 'react-input-range'\nimport NumericSlider from './NumericSlider'\nimport { RGBAType } from '../game/Config'\nimport { GameState } from '../game/Game'\n\nconst rgbaColorToRGBA = (color: RGBColor): RGBAType => [color.r, color.g, color.b, (color.a || 0) * 255]\nconst rgbaToRGBAColor = (rgba: RGBAType): RGBColor => ({ r: rgba[0], g: rgba[1], b: rgba[2], a: rgba[3] / 255 })\n\ntype GameConfiguratorProps = {\n    game: GameState\n}\n\nconst ConfigStyled = styled.div`\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 100vh;\n    width: 250px;\n    display: flex;\n    flex-direction: column;\n    padding: 12px 32px 12px 32px;\n    background: rgba(0,0,0,0.05);\n    box-shadow: 0 0 1px 2px rgba(0,0,0,0.05);\n    h2 {\n        margin: 0\n    }\n    > div {\n        margin-top: 2rem;\n        position: relative;\n        padding-top: 32px;\n    }\n    label {\n        font-size: 12px;\n        font-weight: 500;\n        position: absolute;\n        bottom: -1rem;\n        left: 0;\n        right: 0;\n        margin: 0 auto;\n        width: 100%;\n        text-align: center;\n    }\n    \n    \n    button {\n        margin-top: 3rem;\n        font-size: .75rem;\n        padding: .4rem;\n        height: 2rem;\n        color: white;\n        border: 1px solid rgba(0,0,0,0.05);\n        cursor: pointer;\n        &.paused {\n            background: #ff3e5b;\n        }\n        &.start {\n            background: #3e51b5;\n            &.re {\n                margin-top: .5rem;\n                margin-bottom: .5rem;\n            }\n        }\n        &.reset {\n            border: 1px solid rgba(0,0,0,0.15);\n            background: white;\n            color: black;\n        }\n    }\n    \n    .helper {\n        font-size: .7rem;\n        color: gray;\n        transition: all .3s ease-in-out;\n        visibility: hidden;\n        opacity: 0;\n        &.paused {\n            visibility: visible;\n            opacity: 1;\n        }\n    }\n`\n\nconst GameConfigurator: React.FC<GameConfiguratorProps> = ({ game }) => {\n    const [config, setConfig] = useState(game.config)\n    const { paused } = game\n    const onRestart = useCallback(() => game.restart(), [game])\n    const onStart = useCallback(() => game.start(), [game])\n    const onReset = useCallback(() => {\n        game.stop()\n        game.reset()\n    }, [game])\n    const onStop = useCallback(() => game.stop(), [game])\n    const onChangeSize = useCallback((value: number | Range) => {\n        game.stop()\n        setConfig(game.config.setSize(value as number))\n    }, [game])\n    const onChangeUnit = useCallback((value: number | Range) => {\n        game.stop()\n        setConfig(game.config.setUnit(value as number))\n    }, [game])\n    const onChangeInterval = useCallback((value: number | Range) => {\n        game.stop()\n        setConfig(game.config.setIntervalMs(value as number))\n    }, [game])\n    const onChangeIterations = useCallback((value: number | Range) => {\n        game.stop()\n        setConfig(game.config.setIterations(value as number))\n    }, [game])\n    const onChangeRGBA = useCallback((color: any) => {\n        game.stop()\n        setConfig(game.config.setCellRGBA(rgbaColorToRGBA(color.rgb)))\n    }, [game])\n    return (\n        <ConfigStyled>\n            <h2>{game.iteration}</h2>\n            <NumericSlider\n                label=\"Size\"\n                maxValue={300}\n                minValue={10}\n                step={5}\n                value={config.size}\n                onChangeComplete={onRestart}\n                onChange={onChangeSize}/>\n            <NumericSlider\n                label={'Unit'}\n                maxValue={30}\n                minValue={1}\n                step={1}\n                value={config.unit}\n                onChangeComplete={onStart}\n                onChange={onChangeUnit}/>\n            <NumericSlider\n                label=\"Interval (ms)\"\n                maxValue={1000}\n                minValue={5}\n                step={1}\n                value={config.intervalMs}\n                onChangeComplete={onStart}\n                onChange={onChangeInterval}/>\n            <NumericSlider\n                label=\"Iterations total\"\n                maxValue={10000}\n                minValue={1}\n                step={1}\n                value={config.iterations}\n                onChangeComplete={onStart}\n                onChange={onChangeIterations}/>\n            <div>\n                <SliderPicker onChange={onChangeRGBA} onChangeComplete={onStart}\n                              color={rgbaToRGBAColor(config.cellRGBA)}/>\n            </div>\n            <button className={paused ? 'start' : 'paused'}\n                    onClick={paused ? onStart : onStop}>{paused ? 'Start' : 'Pause'}</button>\n            <button className=\"re start\" onClick={onRestart}>Restart</button>\n            <span className={`helper ${paused ? 'paused' : ''}`}>Click on canvas to toggle cell state</span>\n            <button className=\"reset\" onClick={onReset}>Reset</button>\n        </ConfigStyled>\n    )\n}\n\nexport default React.memo(GameConfigurator)\n","export type RGBAType = [number, number, number, number]\n\nconst inRGBARange = (num: number) => num >= 0 && num <= 255\n\nexport default class Config {\n    size: number = 100\n    unit: number = 10\n    cellRGBA: RGBAType = [0, 0, 0, 255]\n    iterations: number = 10\n    intervalMs: number = 100\n    initialAliveCells: { x: number, y: number }[] = []\n    initialAliveCellsIndexes: number[] = []\n\n    fillInitialAliveCellsMap = () => {\n        this.initialAliveCellsIndexes = this.initialAliveCells.reduce((prev: number[], curr: { x: number, y: number }) =>\n            prev.concat([curr.y * (this.size) + curr.x]), [])\n    }\n\n    setUnit = (unit: number) => {\n        this.unit = unit\n        return this\n    }\n\n    setCellRGBA = (rgba: RGBAType) => {\n        if (rgba.find(num => !inRGBARange(num))) {\n            console.warn('RGBA is not properly specified, e.g.: [0,0,0,255]')\n        } else {\n            this.cellRGBA = rgba\n        }\n        return this\n    }\n\n    setSize = (size: number) => {\n        this.size = size\n        return this\n    }\n\n    setIterations = (iterations: number) => {\n        this.iterations = iterations\n        return this\n    }\n\n    setIntervalMs = (intervalMs: number) => {\n        this.intervalMs = intervalMs\n        return this\n    }\n\n    addInitialAliveCell = (x: number, y: number) => {\n        if (this.isXYInRange(x, y)) {\n            this.initialAliveCells.push({ x, y })\n        } else {\n            throw Error(`X / Y is not in specified range`)\n        }\n        return this\n    }\n\n    isXYInRange = (x: number, y: number): boolean => x >= 0 && x < this.size && y >= 0 && y < this.size\n\n}\n","import Game from './Game'\nimport Config from './Config'\n\nexport default Game\n\nexport {\n    Config,\n}\n","import Config from './Config'\n\nexport interface GameState {\n    grid: number[]\n    iteration: number\n    paused: boolean\n    config: Config\n    start: any\n    stop: any\n    restart: any\n    reset: any\n    toggleCellState: any\n}\n\nexport default class Game {\n\n    config: Config = new Config()\n    iteration: number = 0\n    paused: boolean = true\n    grid: number[] = []\n\n    interval?: number\n    update?: (game: GameState) => void\n\n    constructor(config: Config) {\n        this.config = config\n        this.initGame()\n    }\n\n    initGame = () => {\n        this.paused = true\n        this.iteration = 0\n        this.grid = []\n        this.config.fillInitialAliveCellsMap()\n        const size: number = this.config.size\n        for (let i = 0, len = size * size; i < len; i++) {\n            this.initXYCell(i)\n        }\n    }\n\n    start = (reset?: boolean) => {\n        if (reset) {\n            this.initGame()\n        }\n        this.paused = false\n        this.interval = setInterval(this.tick, this.config.intervalMs)\n        this.tick()\n        return this\n    }\n\n    reset = () => {\n        this.stop()\n        this.initGame()\n        this.doUpdate()\n    }\n\n    onUpdate = (doAction: (state: GameState) => void) => {\n        this.update = doAction\n        return this\n    }\n\n    stop = () => {\n        this.paused = true\n        clearInterval(this.interval)\n        this.doUpdate()\n    }\n\n    restart = () => {\n        this.stop()\n        this.start(true)\n    }\n\n    tick = () => {\n        if (this.iteration >= this.config.iterations) {\n            this.stop()\n            return\n        }\n        this.iteration++\n        const grid = []\n        for (let i = 0, gridLen = this.grid.length; i < gridLen; i++) {\n            const total = this.getTotalAliveNeighbours(i)\n            grid[i] = total !== 2 ? (total === 3 ? 1 : 0) : this.grid[i]\n        }\n        this.grid = grid\n        this.doUpdate()\n    }\n\n    doUpdate = () => {\n        if (this.update) {\n            this.update(this.getGameState())\n        }\n    }\n\n    getGameState = () => ({\n        paused: this.paused,\n        grid: this.grid,\n        iteration: this.iteration,\n        config: this.config,\n        start: this.start,\n        stop: this.stop,\n        restart: this.restart,\n        reset: this.reset,\n        toggleCellState: this.toggleCellState,\n    })\n\n    toggleCellState = (pos: number) => {\n        this.grid[pos] = this.grid[pos] === 1 ? 0 : 1\n        this.doUpdate()\n    }\n\n    private getTotalAliveNeighbours = (pos: number): number => {\n        const { size } = this.config\n        return this.grid[pos - 1 - (size)] +\n            this.grid[pos - (size)] +\n            this.grid[pos + 1 - (size)] +\n            this.grid[pos - 1] +\n            this.grid[pos + 1] +\n            this.grid[pos - 1 + (size)] +\n            this.grid[pos + (size)] +\n            this.grid[pos + 1 + (size)]\n    }\n\n    private initXYCell = (i: number) => {\n        const { initialAliveCellsIndexes } = this.config\n        const alive = initialAliveCellsIndexes.indexOf(i) >= 0\n        this.grid[i] = alive ? 1 : 0\n    }\n}\n","import React, { useEffect, useState, useCallback, useMemo } from 'react'\nimport BoardRenderer from './components/BoardRenderer'\nimport GameConfigurator  from './components/GameConfigurator'\nimport Game, { Config } from './game'\nimport { GameState } from './game/Game'\n\nimport 'normalize.css/normalize.css'\nimport 'react-input-range/lib/css/index.css'\nimport './App.css'\n\nconst defaultConfig = new Config()\n    .setSize(160)\n    .setUnit(5)\n    .setIntervalMs(1000 )\n    .setCellRGBA([245, 55, 136, 255])\n    .setIterations(4000)\n    .addInitialAliveCell(52, 26)\n    .addInitialAliveCell(52, 26)\n    .addInitialAliveCell(52, 27)\n    .addInitialAliveCell(51, 27)\n    .addInitialAliveCell(52, 28)\n    .addInitialAliveCell(53, 28)\n\n\nconst useGame = (config: Config) => {\n    const gameInstance = useMemo<Game>(() => new Game(config), [config])\n    const [game, setGame] = useState<GameState>(gameInstance.getGameState())\n    const onUpdate = useCallback((g: GameState) => setGame(g), [])\n    useEffect(() => {\n            gameInstance.onUpdate(onUpdate)\n            return () => {\n                gameInstance.stop()\n            }\n        }, [gameInstance, onUpdate],\n    )\n    return game\n}\n\nconst App: React.FC = () => {\n    const game = useGame(defaultConfig)\n    return (\n        <>\n            <GameConfigurator game={game}/>\n            <BoardRenderer game={game}/>\n        </>\n    )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}